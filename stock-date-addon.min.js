/**
 * Stock Date Addon v1.0 - Minified
 * Adiciona data de upload na hero-section sem modificar arquivos originais
 */
!function(){"use strict";const e={dateElementId:"stock-update-date",heroSelector:".hero-content",dateFormat:"DD/MM/YYYY",fallbackToCurrentDate:!0,retryAttempts:3,retryDelay:1e3},t={en:{lastUpdated:"Last updated:",loading:"Loading...",unavailable:"Date unavailable"},es:{lastUpdated:"Última actualización:",loading:"Cargando...",unavailable:"Fecha no disponible"}};function n(){const e=localStorage.getItem("selectedLanguage");return e||(document.documentElement.lang?document.documentElement.lang.substring(0,2):"en")}function a(e){const a=n();return t[a]&&t[a][e]?t[a][e]:t.en[e]}function o(e){const t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return`${t}/${n}/${e.getFullYear()}`}function r(){const t=document.createElement("div");return t.className="hero-date-info",t.innerHTML=`\n            <span class="date-label">${a("lastUpdated")}</span>\n            <span id="${e.dateElementId}" class="date-value">${a("loading")}</span>\n        `,t}function d(){const e=document.createElement("style");e.textContent='\n            .hero-date-info {\n                margin-top: 1rem;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                gap: 0.5rem;\n                font-size: 0.9rem;\n                color: #64748b;\n                animation: fadeIn 0.5s ease-in;\n            }\n\n            .hero-date-info .date-label {\n                font-weight: 500;\n            }\n\n            .hero-date-info .date-value {\n                font-weight: 600;\n                color: #00B04F;\n                background: rgba(0, 176, 79, 0.1);\n                padding: 0.25rem 0.75rem;\n                border-radius: 20px;\n                border: 1px solid rgba(0, 176, 79, 0.2);\n                transition: all 0.3s ease;\n            }\n\n            .hero-date-info .date-value:hover {\n                background: rgba(0, 176, 79, 0.15);\n                transform: translateY(-1px);\n            }\n\n            @keyframes fadeIn {\n                from { opacity: 0; transform: translateY(10px); }\n                to { opacity: 1; transform: translateY(0); }\n            }\n\n            @media (max-width: 768px) {\n                .hero-date-info {\n                    flex-direction: column;\n                    gap: 0.25rem;\n                    font-size: 0.8rem;\n                }\n            }\n        ',document.head.appendChild(e)}async function c(){try{const e=await fetch("stock_data.json",{method:"HEAD",cache:"no-cache"}),t=e.headers.get("Last-Modified");if(t)return new Date(t);throw new Error("Last-Modified header not found")}catch(e){return console.warn("Stock Date Addon: Could not get date from headers:",e.message),null}}async function i(){try{const e=await fetch("stock_data.json",{cache:"no-cache"}),t=await e.json();return t.metadata&&t.metadata.lastUpdated?new Date(t.metadata.lastUpdated):null}catch(e){return console.warn("Stock Date Addon: Could not get date from JSON:",e.message),null}}async function l(t=1){const n=document.getElementById(e.dateElementId);if(n)try{let r=await i();r||(r=await c()),!r&&e.fallbackToCurrentDate&&(r=new Date,console.info("Stock Date Addon: Using current date as fallback")),r?(n.textContent=o(r),n.style.color="#00B04F"):function(){throw new Error("No date source available")}()}catch(o){if(console.error("Stock Date Addon: Error updating date:",o.message),t<e.retryAttempts)return void setTimeout(()=>{l(t+1)},e.retryDelay);n.textContent=a("unavailable"),n.style.color="#ef4444"}}function s(){const t=document.querySelector(e.heroSelector);if(!t)return console.warn("Stock Date Addon: Hero section not found"),!1;if(document.getElementById(e.dateElementId))return!0;const n=r();return t.appendChild(n),!0}function u(){const e=document.querySelector(".hero-date-info .date-label");e&&(e.textContent=a("lastUpdated"))}function g(){d(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{s()&&l()},100)}):setTimeout(()=>{s()&&l()},100),document.addEventListener("languageChanged",u),window.addEventListener&&window.addEventListener("storage",function(e){"selectedLanguage"===e.key&&u()})}window.StockDateAddon={update:l,updateLanguage:u},g()}();

